<style>
/* Basic styling for the tabbed interface */
.tab-container { display: flex; flex-direction: column; }
.tabs { display: flex; border-bottom: 2px solid #ccc; }
.tab-title { padding: 10px 15px; cursor: pointer; border-bottom: 2px solid transparent; transition: border-color 0.3s ease; }
.tab-title.active { border-bottom-color: #007bff; }
.tab-panel { display: none; }
.tab-panel.active { display: block; }
</style>

<div class="tab-container">
    <div class="tabs" id="toc-tabs">
        <div class="tab-title active" data-target="home-panel">Home</div>
        </div>
    <div class="tab-content">
        <div class="tab-panel active" id="home-panel">
            </div>
        </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabsContainer = document.getElementById('toc-tabs');
    const contentContainer = document.getElementById('toc-content');

    if (!tabsContainer || !contentContainer) {
      return;
    }
    
    // This finds all direct child elements of the main content div
    const sections = contentContainer.querySelectorAll('h2, h3');
    
    // Now, create the tab panels
    sections.forEach((section, index) => {
        const tab = document.createElement('div');
        tab.className = 'tab-title';
        tab.textContent = section.textContent;
        tab.dataset.target = 'tab-panel-' + index;
        tabsContainer.appendChild(tab);

        // This is the new logic to create the content panel
        const panel = document.createElement('div');
        panel.id = 'tab-panel-' + index;
        panel.className = 'tab-panel';

        // Move all content from the main page into the new panel
        let nextSibling = section.nextElementSibling;
        while (nextSibling) {
            if (nextSibling.tagName === 'H2' || nextSibling.tagName === 'H3') {
                break;
            }
            panel.appendChild(nextSibling);
            nextSibling = section.nextElementSibling;
        }
        contentContainer.parentNode.insertBefore(panel, contentContainer);
    });

    // Handle tab clicks
    tabsContainer.addEventListener('click', (event) => {
        const targetTab = event.target.closest('.tab-title');
        if (targetTab) {
            document.querySelectorAll('.tab-title').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));

            targetTab.classList.add('active');
            const targetPanelId = targetTab.dataset.target;
            document.getElementById(targetPanelId).classList.add('active');
        }
    });
});
</script>
