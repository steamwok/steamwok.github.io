<style>
/* Basic CSS for the tabbed interface */
.tab-container { display: flex; flex-direction: column; }
.tabs { display: flex; border-bottom: 2px solid #ccc; }
.tab-title { padding: 10px 15px; cursor: pointer; border-bottom: 2px solid transparent; transition: border-color 0.3s ease; }
.tab-title.active { border-bottom-color: #007bff; }
.tab-content > div { display: none; }
.tab-content > div.active { display: block; }
</style>

<div class="tab-container">
    <div class="tabs" id="toc-tabs">
        </div>
    <div class="tab-content" id="toc-content">
        </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabsContainer = document.getElementById('toc-tabs');
    const contentContainer = document.getElementById('toc-content');
    
    // Check if the containers exist on the page
    if (!tabsContainer || !contentContainer) {
      return;
    }
    
    // Get all sections from the page content (e.g., all <h2> headings)
    const sections = document.querySelectorAll('#toc-content > h2, #toc-content > h3');

    // Create a tab for each section
    sections.forEach((section, index) => {
        const tab = document.createElement('div');
        tab.className = 'tab-title';
        tab.textContent = section.textContent;
        tabsContainer.appendChild(tab);
        
        // Hide all content sections initially and group them under a panel
        const panel = document.createElement('div');
        let nextSibling = section.nextElementSibling;
        while (nextSibling && nextSibling.tagName !== 'H2' && nextSibling.tagName !== 'H3') {
            panel.appendChild(nextSibling);
            nextSibling = section.nextElementSibling;
        }
        contentContainer.appendChild(panel);

        // Set the first tab and panel as active by default
        if (index === 0) {
            tab.classList.add('active');
            panel.classList.add('active');
        }

        // Add click event listener to each tab
        tab.addEventListener('click', () => {
            // Remove 'active' from all tabs and content panels
            document.querySelectorAll('#toc-tabs .tab-title').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('#toc-content > div').forEach(c => c.classList.remove('active'));
            
            // Add 'active' to the clicked tab and its corresponding content panel
            tab.classList.add('active');
            panel.classList.add('active');
        });
    });
});
</script>
